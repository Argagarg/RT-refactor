!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,i){"use strict";i.d(t,"a",function(){return r});class r{constructor(e,t,i="Generic"){this.attribute=e,this.modifier=t,this.roll=randomInteger(100),this.name=i,this.diff=t}reroll(){this.roll=randomInteger(100)}calcdegreesofsuccess(){let e=this.attribute+this.modifier,t=0;t=this.roll<e?Math.floor(e/10)-Math.floor(this.roll/10)+1:Math.floor(e/10)-Math.floor(this.roll/10)-1,this.dos=t}bindmodifier(){this.modifier>60?this.modifier=60:this.modifier<-60&&(this.modifier=-60)}get attribute(){return this._attribute}get modifier(){return this._modifier}get roll(){return this._roll}get dos(){return this._dos}get name(){return this._name}get diff(){return this._diff}set attribute(e){if(void 0===e||0==Number.isInteger(parseInt(e)))throw"invalid attribute";if(parseInt(e)<0||parseInt(e)>200)throw"attribute out of range";this._attribute=parseInt(e)}set modifier(e){if(void 0===e||0==Number.isInteger(parseInt(e)))throw"invalid modifier";if(parseInt(e)<-200||parseInt(e)>200)throw"modifier out of range";this._modifier=parseInt(e)}set roll(e){if(void 0===e||0==Number.isInteger(parseInt(e)))throw"invalid roll";if(parseInt(e)<=1||parseInt(e)>100)throw"roll out of range";this._roll=parseInt(e)}set dos(e){if(void 0===e||0==Number.isInteger(parseInt(e)))throw"invalid dos";if(parseInt(e)<-20||parseInt(e)>20)throw"dos out of range";this._dos=parseInt(e)}set name(e){this._name=e}set diff(e){this._diff=0==e?"Challenging":30==e?"Easy":20==e?"Routine":10==e?"Ordinary":-10==e?"Difficult":-20==e?"Hard":-30==e?"Very Hard":-40==e?"Arduous":-50==e?"Punishing":-60==e?"Hellish":"Other"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Skillcheck});var _talents_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_check_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0);class Skillcheck extends _check_js__WEBPACK_IMPORTED_MODULE_1__.a{constructor(e,t,i,r){super(e,t,i),this.talents=new _talents_js__WEBPACK_IMPORTED_MODULE_0__.a(r),this.prebindqueue=[],this.postqueue=[]}applytalents(){this.talents.active.forEach(function(e){e.triggers.includes("prebind")&&this.prebindqueue.push(e),e.triggers.includes("post")&&this.postqueue.push(e)},this),log(this.prebindqueue),log(this.postqueue)}bindmodifier(){let modifier=this.modifier,skillname=this.name;this.prebindqueue.length>0&&this.prebindqueue.forEach(function(element){eval(element.evalcondition)&&(log("applying the talent(prebind):"),log(element),eval(element.evaleffect))}),this.modifier=modifier,super.bindmodifier()}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return pcprep});var _check_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_skill_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);function pcprep(check,token,mode=null,msg=null){null!=mode&&"normal"==mode?mode="":null!=mode&&"secret"==mode?mode="--whisper|self,gm":null!=mode&&"hidden"==mode?(mode="--whisper|gm",null!=msg&&""!=msg.who&&sendChat(msg.who,"/w "+msg.who+" sent a secret "+skillname+" roll to the GM.")):mode="";let checkstr="";checkstr=check.dos>0?'<span style="color:green">'+token+" succeeds by <B>"+check.dos+" degree(s)</B>.</span> ":'<span style="color:red">'+token+" fails by <B>"+Math.abs(check.dos)+" degree(s)</B></span>. ";let qualstr="",skillname=check.name;log("the name for comparison is:"),log(skillname),check.postqueue&&check.postqueue.length>0&&check.postqueue.forEach(function(element){eval(element.evalcondition)&&(log("applying the talent(post):"),log(element),qualstr=qualstr+" --"+element.name+" | "+element.description)});let player_obj=getObj("player",msg.playerid);msg.content="!power {{ "+mode+" --format|skill --titlefontshadow|none --name|"+token+" --leftsub|"+check.name+" Check --rightsub| "+check.diff+" Diff. --Roll:|[! "+check.roll+" !] vs [! "+(check.modifier+check.attribute)+" !]  --Result:|"+checkstr+qualstr+" }}",msg.who=msg.who.replace(" (GM)",""),msg.content=msg.content.replace(/<br\/>\n/g," ").replace(/({{(.*?)}})/g," $2 "),PowerCard.Process(msg,player_obj)}},function(e,t,i){"use strict";i.d(t,"a",function(){return r});class r{constructor(e,t=null){this.availableExisting={adamantiumfaith:!1,aegisofcontempt:!1,ambassadorimp:!1,ambidexterous:!1,archivator:!1,armormonger:!1,assassinstrike:!1,bastionironwill:!1,battlerage:!1,blademaster:!1,blindfighting:!1,bodyguard:!1,bulgingbiceps:{name:"BulgingBiceps",evalcondition:"skillname=='Athletics'",evaleffect:"",triggers:["post"],description:"Grants +20 to the Heft use of the Athletics skill"},bulwarkoffaith:!1,catfall:!1,cluesfromcrowds:!1,combatmaster:!1,constantvigilance:!1,"contact network":!1,coordinatedinterrogation:{name:"CoordinatedInterrogation",evalcondition:"skillname=='Interrogation'",evaleffect:"modifier += 10;",triggers:["prebind","post"],description:"Grants +10 to all interrogation tests (inc) and +5 for each additional ally with this talent"},counterattack:!1,coverup:!1,crushingblow:!1,daemonhunter:!1,daemonicdisrupt:!1,daemonologist:!1,darksoul:!1,deathdealer:!1,delicateinterrogation:!1,denythewitch:!1,devastatingassault:!1,diehard:!1,disarm:!1,divineprotection:!1,doubletap:!1,doudbleteam:!1,enemy:!1,eyeofvengeance:!1,faceinacrowd:!1,favoredbywarp:!1,ferricsummons:!1,fieldvivi:!1,flagellant:!1,flashofinsight:!1,frenzy:!1,grenadier:!1,haloofcommand:!1,hammerblow:!1,hardenedsoul:!1,hardtarget:!1,hardy:!1,hatred:!1,hipshooting:!1,hotshotpilot:!1,hulldown:!1,independenttargeting:!1,indomitableconv:!1,inescapableattack:!1,infusedknowledge:!1,inspiringaura:!1,instrumentofhiswill:!1,intothejaws:!1,ironfaith:!1,ironjaw:!1,ironresolve:!1,jaded:!1,keenintuition:!1,killingstrike:!1,leapingdodge:!1,leapup:!1,lightningattack:!1,luminenblast:!1,luminenshock:!1,maglevtrans:!1,marksman:!1,mastery:!1,mechadendrite:!1,mightyshot:!1,mountedwarrior:!1,neverdie:!1,nowheretohide:!1,oneonone:!1,peer:!1,penitentpsy:!1,precisionkiller:!1,preturnaturalspeed:!1,prosanguine:!1,purityofhatred:!1,pushthelimit:!1,quickdraw:!1,rapidreload:!1,resistance:!1,riteofbanish:!1,sancticpurity:!1,shieldwall:!1,skilledrider:!1,soundcon:!1,sprint:!1,stepaside:!1,strongminded:!1,superiorchi:{name:"SuperiorChirurgeon",evalcondition:"skillname=='SuperiorChirurgeon'",evaleffect:"modifier += 20;",triggers:["prebind","post"],description:"+20 to Medicae and ignores Heavily Damaged penalty and suffers only a -10 for Critical Damage"},swiftattack:!1,taintedpsy:!1,takedown:!1,targetselection:!1,technicalknock:!1,thundercharge:!1,truegrit:!1,twowpnmstr:!1,twowpnwld:!1,unarmedspec:!1,warpconduit:!1,warplock:!1,warpsense:!1,weaponintuition:!1,weapontech:!1,whirlwindofdeath:!1,witchfinder:!1,xenosavant:!1,amorphous:!1,amphibious:!1,autostabilized:!1,banefulpres:-1,bestial:!1,blind:!1,brutalcharge:-1,burrower:-1,cranialcircuitry:!1,crawler:!1,cybermantle:!1,daemonic:-1,darksight:!1,deadlynatural:!1,electrograft:!1,electooinductors:!1,fear:-1,flyer:-1,frombeyond:!1,hoverer:-1,incorporeal:!1,machine:-1,mindlock:!1,multiplearms:-1,naturalarmor:-1,naturalweapons:!1,potentiacoil:!1,phase:!1,psyker:!1,quadruped:!1,regeneration:-1,sanctioned:!1,size:-1,sonarsense:!1,soulbound:!1,stampede:!1,stuffofnightmares:!1,sturdy:!1,touchedbythefates:-1,toxic:-1,undying:!1,unnaturalsenses:!1,warpinstability:!1,warpweapons:!1,abyssalterror:!1,adrenalrecovery:!1,advancedbattlesuittraining:!1,allyofthexenos:!1,apotheosisdelayed:!1,attackmytarget:!1,baneofthedaemon:!1,battlefieldtechnician:!1,bestofthebest:!1,blessedmartyrdom:!1,blessingoftheethereals:!1,bondingritual:!1,boundtothehighest:!1,braceforimpact:!1,burytheknife:!1,ceaselesscrusader:!1,cleanseandpurify:!1,cleansewithfire:!1,cogswithincogs:!1,coldreading:!1,coldtrader:!1,combatflair:!1,completecontrol:!1,corruptedcharge:!1,coverandadvance:!1,daemonicaffinity:!1,daemonicanathema:!1,daemonicdomination:!1,daemonicemergence:!1,damagecontrol:!1,despoiler:!1,discipleofkauyon:!1,discipleofmontka:!1,dispassionatedispatch:!1,divineministration:!1,divinesymbol:!1,divinevengeance:!1,emperorsguidance:!1,envoyofthegreatergood:!1,exemplaroftheselflesscause:!1,fated:!1,favoreditem:!1,feelnopain:!1,firebrandscall:!1,firesupport:!1,flamesoffaith:!1,fleshwarp:!1,furiousfusillade:!1,furiouszeal:!1,greaterthanthesun:!1,holdfast:!1,honorguard:!1,hunkerdown:!1,inspiredintuition:!1,jackofalltrades:!1,killerseye:!1,legendary:!1,legendaryarmament:!1,lostokenhancement:!1,luminenbarrier:!1,luminendesecration:!1,luminenflare:!1,luminenshield:!1,luminensurge:!1,marauder:!1,martyrsgift:!1,masterofalltrades:!1,masteroftechnology:!1,metalfatigue:!1,mightoftheemperor:!1,mindsight:!1,mindtrap:!1,mortalglamour:!1,newallies:!1,nullfield:!1,operativeconditioning:!1,panxenoist:!1,personalequipment:!1,priorityfire:!1,psychicnull:!1,purgetheunclean:!1,renownedwarrant:!1,resurrection:!1,riteofawe:!1,riteoffear:!1,riteofpurethought:!1,secondsight:!1,sharedestiny:!1,shieldingfaith:!1,shieldofcontempt:!1,shipmaster:!1,snapshot:!1,soullessaura:!1,soulstorm:!1,soulward:!1,spiritofthemartyr:!1,squadmode:!1,strengththroughconviction:!1,strengththroughunity:!1,subversiveprogramming:!1,suffertheflesh:!1,superiorsupplychain:!1,supportingfire:!1,supremetelepath:!1,swarmprotocols:!1,tacticalflexibility:!1,tacticalwithdrawal:!1,takethemalive:!1,technologicalinsight:!1,technologytriumphant:!1,tempestofmonkua:!1,theemperorprotects:!1,thepowerbeyond:!1,thepowerwithin:!1,throughunitydevastation:!1,undyingwarrior:!1,unfalteringredemption:!1,unhalloweddiscovery:!1,unholyinsight:!1,unorthodoxrites:!1,"veteran's reflexes":!1,voidsavant:!1,warpanathema:!1,warpawareness:!1,warpbane:!1,warpdisruption:!1,warpforge:!1,watchfulforbetrayal:!1,whispersfrombeyond:!1,whispersofsamadhi:!1,willoftheinquisitor:!1,wrathoftherighteous:!1,xenoarcheologist:!1,xenosaugmentation:!1,xenosfamiliarity:!1,xenoshybridization:!1,zealotspassion:!1,coldsoul:!1,lostokaugmentation:!1,masteryofaugurs:!1,masteryofgunnery:!1,masteryofsmallcraft:!1,masteryofspace:!1,possessed:!1,purefaith:!1,rigormentis:!1,temperament:!1,untouchable:!1,xenophilia:!1},this.active=e,this.newTalents=t}get active(){return this._active}set active(e){let t,i,r,n=0,a=[];for(t=0,i=(e=e.split(".")).length;t<i;t++)e[t]=e[t].replace(/^\s+|\s+$/g,""),r=e[t].match(/\d/),e[t]=e[t].replace(/\(([^)]+)\)/g,""),n=e[t],r&&this.availableExisting[n]&&this.availableExisting[n].magnitude&&(this.availableExisting[n].magnitude=r),this.availableExisting[n]&&a.push(this.availableExisting[n]);this._active=a,log("active talents:"),log(this.active)}}},function(e,t,i){"use strict";i.r(t);var r=i(0),n=i(1);var a=i(2),o=o||function(){function e(e){var i,o=_.clone(e);try{if("api"!==o.type)return;if("!40k"!==(i=o.content).split(" ").shift())return;(i=(i=t(i).replace(/\s/g,"")).split("-")).shift();let s=t(i.shift()),l=i.shift();switch(s){case"check":if(i.length<2)throw"too few arguments for !40k -check";{let e=function(e){let t=new r.a(...e);return t.bindmodifier(),t.calcdegreesofsuccess(),t}(i);Object(a.a)(e,l,"normal",o),log(e)}break;case"skill":if(i.length<2)throw"too few arguments for !40k -skill";{let e=function(e){let t=new n.a(...e);return t.applytalents(),t.bindmodifier(),t.calcdegreesofsuccess(),t}(i);Object(a.a)(e,l,"normal",o),log(e)}}}catch(t){let i=(getObj("player",e.playerid)||{get:()=>"API"}).get("_displayname");sendChat("40kScript",`/w "${i}" `+'<div style="border:1px solid black; background-color: #ffeeee; padding: .2em; border-radius:.4em;" ><div>There was an error while trying to run your command:</div>'+`<div style="margin: .1em 1em 1em 1em;"><code>${e.content}</code></div>`+'<div>Please <a class="showtip tipsy" title="kirk lundblade\'s site" style="color:blue; text-decoration: underline;" href="http://kirklundblade.com">send me this information</a> so I can make sure this doesn\'t happen again (triple click for easy select in most browsers.):</div><div style="font-size: .6em; line-height: 1em;margin:.1em .1em .1em 1em; padding: .1em .3em; color: #666666; border: 1px solid #999999; border-radius: .2em; background-color: white;">'+JSON.stringify({msg:e,stack:t.stack})+"</div></div>")}}function t(e){return e.replace(/^\s+|\s+$/g,"")}return{RegisterEventHandlers:function(){on("chat:message",e)},handleInput:e}}();on("ready",function(){o.RegisterEventHandlers()})}]);