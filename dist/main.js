!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);class i{constructor(e,t,r="generic check"){this.attribute=e,this.modifier=t,this.roll=randomInteger(100),this.name=r,this.diff=t}reroll(){this.roll=randomInteger(100)}calcdegreesofsuccess(){let e=this.attribute+this.modifier,t=0;t=this.roll<e?Math.floor(e/10)-Math.floor(this.roll/10)+1:Math.floor(e/10)-Math.floor(this.roll/10)-1,this.dos=t}bindmodifier(){this.modifier>60?this.modifier=60:this.modifier<-60&&(this.modifier=-60)}get attribute(){return this._attribute}get modifier(){return this._modifier}get roll(){return this._roll}get dos(){return this._dos}get name(){return this._name}get diff(){return this._diff}set attribute(e){if(void 0===e||0==Number.isInteger(parseInt(e)))throw"invalid attribute";if(parseInt(e)<0||parseInt(e)>200)throw"attribute out of range";this._attribute=parseInt(e)}set modifier(e){if(void 0===e||0==Number.isInteger(parseInt(e)))throw"invalid modifier";if(parseInt(e)<-200||parseInt(e)>200)throw"modifier out of range";this._modifier=parseInt(e)}set roll(e){if(void 0===e||0==Number.isInteger(parseInt(e)))throw"invalid roll";if(parseInt(e)<=1||parseInt(e)>100)throw"roll out of range";this._roll=parseInt(e)}set dos(e){if(void 0===e||0==Number.isInteger(parseInt(e)))throw"invalid dos";if(parseInt(e)<-20||parseInt(e)>20)throw"dos out of range";this._dos=parseInt(e)}set name(e){this._name=e}set diff(e){this._diff=0==e?"Challenging":30==e?"Easy":20==e?"Routine":10==e?"Ordinary":-10==e?"Difficult":-20==e?"Hard":-30==e?"Very Hard":-40==e?"Arduous":-50==e?"Punishing":-60==e?"Hellish":"Other"}}var n=n||function(){function e(e){var t,r,n,o,s=_.clone(e);try{if("api"!==s.type)return;if("!40k"!==(t=s.content).split(" ").shift())return;(t=t.split("-")).shift();let l=t.shift().replace(/^\s+|\s+$/g,""),a=t.shift();switch(l){case"check":if(t.length<2)throw"too few arguments for !40k -check";{let e=(r=t[0],n=t[1],(o=new i(r,n)).bindmodifier(),o.calcdegreesofsuccess(),o);!function(e,t,r=null,i=null){null!=r&&"normal"==r?r="":null!=r&&"secret"==r?r="--whisper|self,gm":null!=r&&"hidden"==r?(r="--whisper|gm",null!=i&&""!=i.who&&sendChat(i.who,"/w "+i.who+" sent a secret "+skillname+" roll to the GM.")):r="";let n="";n=e.dos>0?'<span style="color:green">'+t+" succeeds by <B>"+e.dos+" degree(s)</B>.</span> ":'<span style="color:red">'+t+" fails by <B>"+Math.abs(e.dos)+" degree(s)</B></span>. ";let o=getObj("player",i.playerid);i.content="!power {{ "+r+" --format|skill --titlefontshadow|none --name|"+t+" --leftsub|"+e.name+" Check --rightsub| "+e.diff+" Diff. --Roll:|[! "+e.roll+" !] vs [! "+e.modifier+" !]  --Result:|"+n+" }}",i.who=i.who.replace(" (GM)",""),i.content=i.content.replace(/<br\/>\n/g," ").replace(/({{(.*?)}})/g," $2 "),PowerCard.Process(i,o)}(e,a,"normal",s),log(e)}}}catch(t){let r=(getObj("player",e.playerid)||{get:()=>"API"}).get("_displayname");sendChat("40kScript",`/w "${r}" `+'<div style="border:1px solid black; background-color: #ffeeee; padding: .2em; border-radius:.4em;" ><div>There was an error while trying to run your command:</div>'+`<div style="margin: .1em 1em 1em 1em;"><code>${e.content}</code></div>`+'<div>Please <a class="showtip tipsy" title="kirk lundblade\'s site" style="color:blue; text-decoration: underline;" href="http://kirklundblade.com">send me this information</a> so I can make sure this doesn\'t happen again (triple click for easy select in most browsers.):</div><div style="font-size: .6em; line-height: 1em;margin:.1em .1em .1em 1em; padding: .1em .3em; color: #666666; border: 1px solid #999999; border-radius: .2em; background-color: white;">'+JSON.stringify({msg:e,stack:t.stack})+"</div></div>")}}return{RegisterEventHandlers:function(){on("chat:message",e)},handleInput:e}}();on("ready",function(){n.RegisterEventHandlers()})}]);